# **Rede *Lightning* no *Bitcoin* e seu Funcionamento**

- A *Lightning Network* (Rede *Lightning*) no *Bitcoin*, surgiu como uma solução promissora para um dos grandes problemas da *Blockchain* do *Bitcoin*;

- A popularidade do *Bitcoin* foi uma das principais razões para a sua desaceleração, à medida que a rede e tornava mais popular, passava a enfrentar alguns desafios;

- Com o aumento do número de transações, a capacidade de processá-las de forma rápida e barata foi prejudicada, ou seja, o tempo para confirmar cada transação na *Blockchain* aumentou, assim como as taxas que os usuários precisam pagar para que suas transações sejam priorizadas;

- A Rede *Lightning* serve como uma **solução de segunda camada** para a *Blockchain* do *Bitcoin*, utilizando **canais de micropagamento** para aumentar a capacidade da *Blockchain*;

- O primeiro passo para entender as melhores práticas de uso da Rede *Lightning* no *Bitcoin*, é compreender sua definição;

- Ela é uma segunda camada adicionada à *Blockchain* do *Bitcoin* para permitir transações fora da cadeia, essa segunda camada também inclui diferentes canais de pagamento entre os usuários de *Bitcoin*, que podem ser vistos como um método de transação *peer-to-peer*, onde eles podem fazer ou receber pagamentos entre si;

- A principal vantagem da introdução da Rede *Lightning* é a melhoria na escalabilidade das transações da *Blockchain* do *Bitcoin*, pois ela funciona gerenciando transações fora da rede principal da *Blockchain*, enquanto aproveita as vantagens da segurança robusta e criptográfica da *Blockchain* do *Bitcoin*.

## **A Relevância da Rede *Lightning* do *Bitcoin* para os Usuários**

- Muitas pessoas que procuram tokens da Rede *Lightning* precisam entender a importância dela, a escalabilidade é uma das principais barreiras para a adoção em larga escala de criptomoedas;

- O suporte a uma melhor escalabilidade pode ajudar as redes *Blockchain* a gerenciar bilhões de transações por segundo;

- A Rede *Lightning* garante que os usuários paguem taxas baixas para as transações do *Bitcoin*, facilitando a validação fora da cadeia;

- Como resultado, soluções de escalabilidade como a Rede *Lightning* abrem caminho para novos casos de uso do *Bitcoin*, como a possibilidade de realizar transações instantâneas;

- Soluções de escalabilidade, como a Rede *Lightning* podem ajudar a reduzir os custos de energia e acelerar o tempo de processamento para o *Bitcoin*;

- Na verdade, o número de transações por segundo da Rede *Lightning* não é o único indicador para a solução de escalabilidade, também é importante notar que a Rede *Lightning* do *Bitcoin* apresenta algumas limitações;

- Ela introduz a possibilidade de ataques maliciosos com baixas taxas de roteamento;

- Mineradores também evitam transações menores devido às menores taxas de transação, o que exige que os usuários paguem taxas de roteamento e aguardem a validação da transação;

- Além disso, atores mal-intencionados podem abrir e fechar canais de pagamento instantaneamente, o que pode causar congestionamento na rede e violações subsequentes.

## **Fundamentos da Rede *Lightning*** 

- O primeiro conceito para a Rede *Lightning* foi destacado em um artigo de pesquisa em 2015, o qual girava em torno do uso de canais de pagamento no *Bitcoin*;

- A Rede *Lightning* começou como um protocolo fora da cadeia, com diferentes canais de pagamento que permitiam que duas partes transferissem valor sem necessidade de confiança;

- A existência fora da cadeia dos canais de pagamento garante que as transações entre as duas partes não gerem congestionamento na rede principal;

- Os canais fora da cadeia foram projetados para resolver a questão da escalabilidade da *Blockchain* do *Bitcoin*;

- Os proponentes da Rede *Lightning*, *Joseph Poon* e *Thaddeus Dryja*, estabeleceram que o *Bitcoin* poderia competir com os sistemas de pagamento tradicionais, processando cerca de 8 GB de transações por bloco;

- Entretanto, a *Blockchain* atual do *Bitcoin* está significativamente abaixo dos requisitos para atingir tal desempenho;

- Atualmente, o *Bitcoin* pode lidar apenas com sete transações por segundo, além disso, os guias sobre a Rede *Lightning* explicam detalhadamente o limite de 1 MB de transação nos blocos do *Bitcoin*;

- Os canais de pagamento fora da cadeia da Rede *Lightning* poderiam permitir transações menores sem congestionar a rede e prejudicar o seu desempenho;

- Dryja e Poon estabeleceram as bases da Rede *Lightning* em 2016, com a *Lightning Labs*, e a equipe contou com muitos colaboradores ao longo do tempo, com o objetivo final de alcançar a compatibilidade com a rede central do *Bitcoin*;

- Curiosamente, o *soft fork* SegWit na *Blockchain* do *Bitcoin* em 2017 trouxe boas notícias para o projeto da Rede *Lightning*, abrindo mais espaço para acomodar transações adicionais em um bloco;

- O mais importante é que o *fork* baseado em SegWit garantiu a remoção do bug de maleabilidade das transações na *Blockchain*;

- Nos testes de pré-lançamento da Rede *Lightning*, os desenvolvedores puderam criar aplicativos na plataforma, a maioria desses aplicativos focava em casos de uso simples, como plataformas de jogos de azar e carteiras de criptomoedas;

- Os aplicativos podiam utilizar a funcionalidade de microtransações da Rede *Lightning*, finalmente, a *Lightning Labs* lançou a versão beta na rede principal do *Bitcoin* em 2018;

- Posteriormente, o projeto contou com figuras públicas renomadas, como *Jack Dorsey*.

## **Funcionamento da Rede *Lightning***

- O protocolo da Rede *Lightning* cria canais de pagamento *peer-to-peer* entre dois usuários ou partes para uma transação;

- Após o estabelecimento do canal, ele ajuda as partes a trocarem qualquer quantidade de transações em velocidades mais rápidas e com custos mais baixos;

- A Rede *Lightning* atua como um pequeno livro-razão confiável pelos usuários para efetuar pagamentos de produtos e serviços menores;

- A pessoa que inicia a transação deve bloquear uma quantidade específica de *Bitcoin* na Rede *Lightning*, em seguida, o destinatário pode criar faturas de valores a partir dos depósitos do pagador, conforme suas necessidades;

- Os usuários também podem manter um canal aberto adicionando *Bitcoin* consistentemente;

- Quando duas partes abrem e fecham canais de pagamento, as transações não ocorrem na *Blockchain* principal do *Bitcoin*, em vez disso, a *Blockchain* armazena apenas as atualizações finais sobre as transações fora da cadeia na Rede *Lightning*;

- As pessoas interessadas em adquirir tokens da Rede *Lightning* do *Bitcoin* devem também observar que a rede permite a transferência indefinida de fundos em canais de pagamento, sem a necessidade de verificar transações em todos os nós na rede principal do *Bitcoin*;

- Isso proporciona tempos de transação mais rápidos, além disso, os nós da Rede *Lightning* têm a capacidade de rotear transações;

- Os nós da Rede *Lightning* são criados por meio de uma combinação de canais de pagamentos individuais e das partes envolvidas, logo, a Rede *Lightning* pode ser descrita como o resultado da combinação de diferentes sistemas de pagamento.

## **O que Acontece Quando os Usuários Fecham o Canal?**

- A Rede *Lightning* auxilia no fechamento dos canais de pagamento quando duas partes confirmam o encerramento das transações entre elas;

- Ao fechar os canais de pagamento, as informações sobre o canal são consolidadas em uma única transação, a qual é enviada à rede principal do *Bitcoin* para atualização;

- A consolidação de várias pequenas transações em uma só garante que a *Blockchain* principal do *Bitcoin* precise de menos tempo e esforço para validar as transações;

- Sem os canais de pagamento, as pequenas transações poderiam interferir em transações maiores e gerar congestionamento na rede;

- As operações dos canais de pagamento podem melhorar a capacidade de transações por segundo da Rede *Lightning* e oferecer uma melhor escalabilidade;

- Os canais de pagamento na Rede *Lightning* utilizam contratos inteligentes para estabelecer as regras acordadas entre as partes envolvidas;

- Ao mesmo tempo, o código do contrato inteligente também facilita o cumprimento automático do contrato, graças aos requisitos pré-definidos para as transações nos canais de pagamento;

- Outro aspecto importante do funcionamento da Rede *Lightning* ao fechar canais de pagamento é a anonimidade das transações após a validação;

- A Rede *Lightning* apenas mostrará o valor total transferido sem revelar as transações individuais;

- A Rede *Lightning* permite que os usuários realizem transações sem as limitações da *Blockchain* do *Bitcoin*, as transações fora da cadeia, com a Rede *Lightning* garantem credibilidade ao registrar as transações na *Blockchain* do *Bitcoin* após o fechamento dos canais de pagamento;

- Os protocolos fora da cadeia possuem seus próprios registros, que se integram à *Blockchain* principal do *Bitcoin* conforme o design central da Rede *Lightning*.

## **O Canal de Pagamento da Rede *Lightning***

- A curiosidade em relação ao preço da Rede *Lightning* para transações de criptomoedas reflete principalmente nas funções dos canais de pagamento;

- Uma visão geral do funcionamento da Rede *Lightning* revela que os canais de pagamento são uma parte essencial das soluções de camada 2;

- Os canais da Rede *Lightning* são canais de pagamento bidirecionais que permitem a troca de pagamentos em *Bitcoin* de ambos os lados;

- Os canais também formam a base da Rede *Lightning* e geralmente estão associados a uma capacidade de *Bitcoin* e claramente definida;

- Outro destaque importante dos canais de pagamento da Rede *Lightning* é a distribuição da capacidade de *Bitcoin* definida entre as partes envolvidas.

### **Abrindo um Canal de Pagamento *Lightning***

- Duas partes interessadas em uma transação de *Bitcoin* podem abrir um canal de pagamento na Rede *Lightning*, a troca de valores na rede, exige que as partes envolvidas depositem *Bitcoin*;

- Os usuários precisam depositar *Bitcoin* em um endereço multi assinatura 2 de 2 e, após a confirmação do depósito, a Rede *Lightning* abre o canal de pagamento;

- As duas partes em um canal de pagamento podem realizar transações indefinidamente com liquidação quase instantânea a baixo custos;

- Após o término das transações, as partes devem fechar o canal executando outra transação *on-chain* de *Bitcoin*, que refletirá as alterações gerais de saldo das duas partes na *Blockchain* principal.

### **Transações Feitas pelos Usuários Através de um Canal de Pagamento *Lightning***

- Os canais de pagamento funcionam como um conjunto de ativos distribuídos entre as duas partes envolvidas no canal;

- Os ativos são armazenados no endereço multi assinatura, eliminando a necessidade de criar um token adicional para a Rede *Lightning* ou uma representação do *Bitcoin*;

- Todas as transações na Rede *Lightning* ocorrem através do canal, aproveitando a redistribuição de fundos no endereço multi assinatura;

- Quando ocorre a transferência de *Bitcoin* de uma parte para outra, o canal de pagamento atualiza o saldo sem registrar as atualizações na *Blockchain* do *Bitcoin*;

- Finalmente, as partes que utilizam os canais da Rede *Lightning* podem fechar o canal ao concluírem suas transações, o resultado geral das transações em diferentes canais de pagamento é registrado na *Blockchain* do *Bitcoin*, com menos esforço para a validação pelo nós;

## **Roteamento na Rede *Lightning***

- Os principais destaques para entender o uso de uma carteira BTC Rede *Lightning* também incluem o roteamento de pagamentos, os canais de pagamento e os nós servem como os blocos básicos da Rede *Lightning*.

- Não é necessário que um esteja conectado a outro para enviar pagamentos, o roteamento é um conceito eficaz que permite transações entre duas partes desconectadas, aproveitando uma coleção de canais preexistentes;

- Um processo criptográfico eficiente garante que os usuários possam transferir ativos para outro usuário por meio de um canal preexistente e que esses ativos sejam transferidos ao destinatário desejado;

- O usuário intermediário receberá uma pequena taxa pelo roteamento da transação, o processo criptográfico para usar a troca na Rede *Lightning* através do roteamento depende de contratos inteligentes baseados em *Hashed Time Locked Contracts* (HTLCs);

- O HTLC fornece um tipo específico de transação de *Bitcoin*, que serve como contrato inteligente, garantindo que o intermediário pague o valor devido ao destinatário antes de solicitar o pagamento do remetente.

## **Vantagens e Desvantagens da Rede *Lightning* do *Bitcoin***

- A visão geral dos fundamentos da Rede *Lightning* do *Bitcoin* mostra sua capacidade de resolver problemas de escalabilidade da *Blockchain* do *Bitcoin*;

- Você pode notar que o preço da Rede *Lightning* é uma das principais vantagens, o *Bitcoin* não foi projetado para lidar com um grande número de transações;

- A *Rede Lightning* ajuda a acelerar as transações sem sobrecarregar a rede, sem congestionamento na rede, as taxas de transação são significativamente reduzidas para a *Blockchain* do *Bitcoin*;

- Ao mesmo tempo, a Rede *Lightning* também ajuda a reduzir os requisitos de energia para lidar com os níveis crescentes de dificuldade de mineração;

- Além disso, a Rede *Lightning* garante a integridade das transações fora da cadeia usando scripts multi assinatura e contratos inteligentes;

- O interesse dos usuários em adquirir tokens da Rede *Lightning* do *Bitcoin* é justificável;

- Apesar da Rede *Lightning* ser uma rede *Blockchain* com muitos nós para transações fora da cadeia, a solução de escalabilidade de camada 2 para a *Blockchain* do *Bitcoin* possui algumas desvantagens, como a possibilidade de fraude no fechamento do canal;

- Ademais, o aspecto de custo da Rede *Lightning* também inclui taxas de roteamento, taxas de transação em *Bitcoin* e taxas para abertura e fechamento de canais;

- Possibilidades de violações em carteiras, APIs ou canais de pagamento também geram preocupações para a Rede *Lightning*.

## **Considerações Finais**

- A introdução detalhada à Rede *Lightning* revela o seu potencial para transformar a adoção do *Bitcoin*;

- Muitos usuários estão preocupados com a volatilidade do *Bitcoin*, enquanto outros se preocupam com o tempo e o custo das transações em *Bitcoin*;

- A Rede *Lightning*, como o próprio nome sugere, pode ajudar a aumentar a velocidade das transações por segundo, por meio de contratos inteligentes e canais de pagamento;

- O design eficiente para transações ponto a ponto fora da cadeia favorece a adoção da Rede *Lightning*;

- Além disso, a validação de várias pequenas transações como uma grande transação na *Blockchain* do *Bitcoin* oferece melhores perspectivas de desempenho;

- A flexibilidade dos canais de pagamento e os benefícios da segurança da *Blockchain* do *Bitcoin* são destaques significativos da Rede *Lightning*.